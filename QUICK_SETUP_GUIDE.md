# üöÄ Quick Setup Guide - Sentry, Cloud Storage & OAuth

This guide will help you quickly set up the newly implemented features: Sentry error tracking, AWS S3 cloud storage, and OAuth integrations.

---

## ‚ö° Quick Start (5 minutes)

### 1. Create Environment File

```bash
# Copy the example (if it exists)
cp .env.example .env

# Or create manually - see environment variables below
```

### 2. Run Setup Script (Interactive)

```bash
npm run setup:env
```

This interactive script will:
- Generate a secure JWT secret
- Prompt for required values (MongoDB, OpenAI)
- Optionally configure Sentry, AWS S3, and OAuth

### 3. Validate Configuration

```bash
npm run validate:env
```

This will check if all required variables are set and show what features are enabled.

---

## üìã Required Environment Variables

### Core (Required)

```env
# Database
MONGODB_URI=mongodb://localhost:27017/click

# JWT Secret (auto-generated by setup script)
JWT_SECRET=<auto-generated>

# OpenAI API
OPENAI_API_KEY=sk-...
```

### Sentry (Optional but Recommended)

```env
# Backend
SENTRY_DSN=https://xxx@sentry.io/xxx
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1
SENTRY_ORG=your-org
SENTRY_PROJECT=click

# Frontend
NEXT_PUBLIC_SENTRY_DSN=https://xxx@sentry.io/xxx
NEXT_PUBLIC_SENTRY_TRACES_SAMPLE_RATE=0.1
```

### AWS S3 (Optional)

```env
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...
AWS_REGION=us-east-1
AWS_S3_BUCKET=your-bucket-name
AWS_S3_ACL=private
AWS_CLOUDFRONT_URL=https://xxx.cloudfront.net  # Optional
```

### OAuth (Optional)

```env
# Twitter/X
TWITTER_CLIENT_ID=...
TWITTER_CLIENT_SECRET=...

# LinkedIn
LINKEDIN_CLIENT_ID=...
LINKEDIN_CLIENT_SECRET=...

# Facebook/Instagram
FACEBOOK_APP_ID=...
FACEBOOK_APP_SECRET=...
```

---

## üîß Step-by-Step Setup

### Step 1: Sentry Setup (5 minutes)

1. **Create Sentry Account**
   - Go to https://sentry.io/signup/
   - Create a free account

2. **Create Projects**
   - Create a **Node.js** project for backend
   - Create a **Next.js** project for frontend
   - Copy the DSN from each project

3. **Add to .env**
   ```env
   SENTRY_DSN=https://xxx@sentry.io/xxx
   NEXT_PUBLIC_SENTRY_DSN=https://xxx@sentry.io/xxx
   SENTRY_ORG=your-org-slug
   SENTRY_PROJECT=click
   ```

4. **Verify**
   - Start the server
   - Trigger a test error
   - Check Sentry dashboard

**Benefits**: Automatic error tracking, performance monitoring, release tracking

---

### Step 2: AWS S3 Setup (10 minutes)

1. **Create AWS Account**
   - Go to https://aws.amazon.com/
   - Sign up (free tier available)

2. **Create S3 Bucket**
   ```bash
   # Using AWS CLI
   aws s3 mb s3://click-uploads --region us-east-1
   
   # Or use AWS Console:
   # - Go to S3 service
   # - Click "Create bucket"
   # - Name: click-uploads
   # - Region: us-east-1 (or your preference)
   # - Uncheck "Block all public access" if you want public files
   ```

3. **Create IAM User**
   - Go to IAM ‚Üí Users ‚Üí Add user
   - Name: `click-s3-user`
   - Access type: Programmatic access
   - Attach policy: `AmazonS3FullAccess` (or create custom policy)
   - Save Access Key ID and Secret Access Key

4. **Configure CORS** (if needed)
   ```json
   [
     {
       "AllowedHeaders": ["*"],
       "AllowedMethods": ["GET", "PUT", "POST", "DELETE"],
       "AllowedOrigins": ["*"],
       "ExposeHeaders": []
     }
   ]
   ```

5. **Add to .env**
   ```env
   AWS_ACCESS_KEY_ID=AKIA...
   AWS_SECRET_ACCESS_KEY=...
   AWS_REGION=us-east-1
   AWS_S3_BUCKET=click-uploads
   AWS_S3_ACL=private
   ```

6. **Optional: CloudFront CDN**
   - Create CloudFront distribution
   - Origin: Your S3 bucket
   - Copy distribution URL
   - Add to .env: `AWS_CLOUDFRONT_URL=https://xxx.cloudfront.net`

**Benefits**: Scalable file storage, CDN delivery, automatic backups

---

### Step 3: OAuth Setup (15 minutes per platform)

#### Twitter/X OAuth

1. **Create Twitter Developer Account**
   - Go to https://developer.twitter.com/
   - Apply for developer access
   - Create a new app

2. **Configure App**
   - App name: Click
   - Enable OAuth 2.0
   - Callback URL: `http://localhost:3000/api/oauth/callback/twitter` (dev)
   - Callback URL: `https://yourdomain.com/api/oauth/callback/twitter` (prod)
   - Scopes: `tweet.read`, `tweet.write`, `users.read`, `offline.access`

3. **Get Credentials**
   - Copy Client ID and Client Secret

4. **Add to .env**
   ```env
   TWITTER_CLIENT_ID=...
   TWITTER_CLIENT_SECRET=...
   ```

#### LinkedIn OAuth

1. **Create LinkedIn App**
   - Go to https://www.linkedin.com/developers/apps
   - Create new app
   - Add redirect URL: `http://localhost:3000/api/oauth/callback/linkedin`

2. **Request Permissions**
   - Request: `w_member_social` (for posting)
   - Request: `openid`, `profile`, `email` (for user info)

3. **Get Credentials**
   - Copy Client ID and Client Secret

4. **Add to .env**
   ```env
   LINKEDIN_CLIENT_ID=...
   LINKEDIN_CLIENT_SECRET=...
   ```

#### Facebook/Instagram OAuth

1. **Create Facebook App**
   - Go to https://developers.facebook.com/
   - Create new app
   - Add "Facebook Login" product

2. **Configure OAuth**
   - Valid OAuth Redirect URIs:
     - `http://localhost:3000/api/oauth/callback/facebook`
     - `https://yourdomain.com/api/oauth/callback/facebook`
   - Permissions: `pages_manage_posts`, `instagram_basic`, `instagram_content_publish`

3. **Get Credentials**
   - Copy App ID and App Secret

4. **Add to .env**
   ```env
   FACEBOOK_APP_ID=...
   FACEBOOK_APP_SECRET=...
   ```

**Benefits**: Direct posting to social media, automated content distribution

---

## ‚úÖ Verification

### Test Sentry

1. Start server: `npm run dev`
2. Trigger an error (e.g., invalid API call)
3. Check Sentry dashboard - error should appear within seconds

### Test S3

1. Upload a file via API or UI
2. Check S3 bucket - file should be there
3. Verify file URL is accessible

### Test OAuth

1. Go to `/dashboard/social`
2. Click "Connect" for a platform
3. Complete OAuth flow
4. Verify connection appears in dashboard

---

## üêõ Troubleshooting

### Sentry Not Working

- ‚úÖ Check DSN is correct
- ‚úÖ Verify environment variables are loaded
- ‚úÖ Check network connectivity
- ‚úÖ Review Sentry project settings

### S3 Upload Fails

- ‚úÖ Verify AWS credentials are correct
- ‚úÖ Check bucket exists and is accessible
- ‚úÖ Verify IAM user has S3 permissions
- ‚úÖ Check bucket region matches `AWS_REGION`

### OAuth Errors

- ‚úÖ Verify callback URLs match exactly
- ‚úÖ Check OAuth credentials are correct
- ‚úÖ Ensure redirect URIs are whitelisted
- ‚úÖ Review platform-specific requirements

---

## üìö Additional Resources

- [Sentry Documentation](https://docs.sentry.io/)
- [AWS S3 Documentation](https://docs.aws.amazon.com/s3/)
- [Twitter API v2](https://developer.twitter.com/en/docs/twitter-api)
- [LinkedIn API](https://docs.microsoft.com/en-us/linkedin/)
- [Facebook Graph API](https://developers.facebook.com/docs/graph-api)

---

## üéØ Next Steps

After setup:

1. ‚úÖ Run `npm run validate:env` to verify configuration
2. ‚úÖ Test each integration
3. ‚úÖ Monitor Sentry dashboard for errors
4. ‚úÖ Check S3 bucket for uploaded files
5. ‚úÖ Test OAuth flows end-to-end

**All features are production-ready!** üöÄ






